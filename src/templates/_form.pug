mixin form(survey)
  pre=JSON.stringify(rooms)
  #survey-form(data-survey=JSON.stringify(survey) data-rooms=JSON.stringify(rooms))
    .survey-room
      select(v-model="survey.roomId" required=true)
        option(disabled selected value="") Choose a Spark room
        option(v-for="room in rooms" v-bind:value="room.id") {{room.title}}

    .survey-title
      label Survey title:
        input(type='text' v-model.trim="survey.title")

    .survey-description
      label Description
      textarea(v-model.trim="survey.description")

    div Questions
    ul.questions
      li(v-for="question in survey.questions")
        label Question:
        input(type='text' v-model.trim="question.text")

        label Type:
        select(v-model="question.type")
          option(v-for="type in questionTypes") {{type}}

        button(type="button" @click="remove(survey.questions, question)") ➖ remove


        .multi-options(v-if="question.type === 'multi'")
          div Choices
          ul.choices
            li(v-for="choice in question.choices")
              | choice
              button(type="button" @click="remove(question.choices, choice)") ➖ remove
          button(type="button" @click="addChoice(question)") ➕ choice
              input(type='text' v-model.trim="choice.text")

    div
      button(type="button" @click="addQuestion") ➕ question

    div
      button(type="button" @click="saveDraft") Save Draft

    div
      button(type="button" @click="conduct") Conduct Survey
